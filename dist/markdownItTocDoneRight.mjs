function e(e){return encodeURIComponent(String(e).trim().toLowerCase().replace(/\s+/g,"-"))}function r(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}export default function(t,n){var l;n=Object.assign({},{placeholder:"(\\$\\{toc\\}|\\[\\[?_?toc_?\\]?\\]|\\$\\<toc(\\{[^}]*\\})\\>)",slugify:e,containerClass:"table-of-contents",listClass:void 0,itemClass:void 0,linkClass:void 0,level:1,listType:"ol",format:void 0},n);var i=new RegExp("^"+n.placeholder+"$","i");t.renderer.rules.tocOpen=function(){return'<nav class="'+r(n.containerClass)+'">'},t.renderer.rules.tocClose=function(){return"</nav>"},t.renderer.rules.tocBody=function(){return function e(t){var l=n.listClass?' class="'+r(n.listClass)+'"':"",i=n.itemClass?' class="'+r(n.itemClass)+'"':"",a=n.linkClass?' class="'+r(n.linkClass)+'"':"",s=Object.keys(t.c);if(0===s.length)return"";var c="<"+(r(n.listType)+l)+">";return s.forEach(function(l){var s=t.c[l];c+="<li"+i+"><a"+a+' href="#'+s.id+'">'+("function"==typeof n.format?n.format(s.n,r):r(s.n))+"</a>"+e(s)+"</li>"}),c+="</"+r(n.listType)+">"}(l)},t.core.ruler.push("generateTocAst",function(e){l=function(e){var r={};function t(e){for(var t=e,n=2;Object.prototype.hasOwnProperty.call(r,t);)t=e+"-"+n++;return r[t]=!0,t}for(var l,i={l:0,n:"",c:{}},a=[i],s=Array.isArray(n.level)?(l=n.level,function(e){return l.includes(e)}):function(e){return function(r){return r>=e}}(n.level),c=0,o=e.length;c<o;c++){var u=e[c];if("heading_open"===u.type){var f=e[c+1].children.filter(function(e){return"text"===e.type||"code_inline"===e.type}).reduce(function(e,r){return e+r.content},""),p={l:parseInt(u.tag.substr(1),10),n:f,c:{}};if(s(p.l))if(p.id=t(n.slugify(f)),p.l>a[0].l)a[0].c[p.id]=p,a.unshift(p);else if(p.l===a[0].l)a[1].c[p.id]=p,a[0]=p;else{for(;p.l<=a[0].l;)a.shift();a[0].c[p.id]=p,a.unshift(p)}}}return i}(e.tokens)}),t.block.ruler.before("heading","toc",function(e,r,t,l){var a;if(e.sCount[r]-e.blkIndent>=4)return!1;var s=e.src.slice(e.bMarks[r]+e.tShift[r],e.eMarks[r]).split(" ")[0];if(!i.test(s))return!1;if(l)return!0;var c=i.exec(s);if(3===c.length)try{n=Object.assign(n,JSON.parse(c[2]))}catch(e){}return e.line=r+1,(a=e.push("tocOpen","nav",1)).markup="",a.map=[r,e.line],(a=e.push("tocBody","",0)).markup="",a.map=[r,e.line],a.children=[],(a=e.push("tocClose","nav",-1)).markup="",!0},{alt:["paragraph","reference","blockquote"]})}
//# sourceMappingURL=markdownItTocDoneRight.mjs.map
